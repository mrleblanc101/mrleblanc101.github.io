export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO){return {data:{posts:[{_path:"\u002Fblog\u002F2023-01-17-momentjs-avec-nuxt3",_dir:G,_draft:n,_partial:n,_locale:H,_empty:n,title:"Utiliser moment.js avec Nuxt 3",description:"Vous avez peut-Ãªtre remarquer que le module @nuxtjs\u002Fmoment n'est pas capatible avec Nuxt 3.",excerpt:{type:p,children:[{type:a,tag:e,props:{},children:[{type:b,value:I},{type:a,tag:h,props:{href:J,rel:[i]},children:[{type:b,value:q}]},{type:b,value:K}]},{type:a,tag:e,props:{},children:[{type:b,value:L},{type:a,tag:h,props:{href:M,rel:[i]},children:[{type:b,value:r}]},{type:b,value:N}]},{type:a,tag:e,props:{},children:[{type:b,value:O},{type:a,tag:k,props:{},children:[{type:b,value:r}]},{type:b,value:P}]},{type:a,tag:e,props:{},children:[{type:b,value:Q},{type:a,tag:k,props:{},children:[{type:b,value:q}]},{type:b,value:R},{type:a,tag:k,props:{},children:[{type:b,value:S}]},{type:b,value:T}]},{type:a,tag:e,props:{},children:[{type:b,value:U},{type:a,tag:h,props:{href:V,rel:[i]},children:[{type:b,value:W}]},{type:b,value:X}]},{type:a,tag:e,props:{},children:[{type:b,value:Y},{type:a,tag:h,props:{href:Z,rel:[i]},children:[{type:b,value:_}]},{type:b,value:$}]},{type:a,tag:m,props:{code:z,language:aa},children:[{type:a,tag:s,props:{},children:[{type:a,tag:m,props:{__ignoreMap:o},children:[{type:b,value:z}]}]}]},{type:a,tag:e,props:{},children:[{type:b,value:ab}]},{type:a,tag:ac,props:{},children:[{type:a,tag:e,props:{},children:[{type:b,value:ad}]}]},{type:a,tag:e,props:{},children:[{type:b,value:ae},{type:a,tag:h,props:{href:af,rel:[i]},children:[{type:b,value:t}]},{type:b,value:ag}]},{type:a,tag:e,props:{},children:[{type:b,value:ah}]},{type:a,tag:m,props:{code:A,language:ai},children:[{type:a,tag:s,props:{},children:[{type:a,tag:m,props:{__ignoreMap:o},children:[{type:b,value:A}]}]}]},{type:a,tag:e,props:{},children:[{type:b,value:aj}]},{type:a,tag:e,props:{},children:[{type:b,value:ak}]},{type:a,tag:e,props:{},children:[{type:b,value:al},{type:a,tag:h,props:{href:am,rel:[i]},children:[{type:b,value:an}]},{type:b,value:ao},{type:a,tag:k,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:e,props:{},children:[{type:b,value:ar},{type:a,tag:h,props:{href:as,rel:[i]},children:[{type:b,value:at}]},{type:b,value:au},{type:a,tag:h,props:{href:av,rel:[i]},children:[{type:b,value:t}]},{type:b,value:aw}]}]},createdAt:"2023-01-17T00:00:00.000Z",readingTime:{text:"3 min read",minutes:2.24,time:134400,words:448},body:{type:p,children:[{type:a,tag:e,props:{},children:[{type:b,value:I},{type:a,tag:h,props:{href:J,rel:[i]},children:[{type:b,value:q}]},{type:b,value:K}]},{type:a,tag:e,props:{},children:[{type:b,value:L},{type:a,tag:h,props:{href:M,rel:[i]},children:[{type:b,value:r}]},{type:b,value:N}]},{type:a,tag:e,props:{},children:[{type:b,value:O},{type:a,tag:k,props:{},children:[{type:b,value:r}]},{type:b,value:P}]},{type:a,tag:e,props:{},children:[{type:b,value:Q},{type:a,tag:k,props:{},children:[{type:b,value:q}]},{type:b,value:R},{type:a,tag:k,props:{},children:[{type:b,value:S}]},{type:b,value:T}]},{type:a,tag:e,props:{},children:[{type:b,value:U},{type:a,tag:h,props:{href:V,rel:[i]},children:[{type:b,value:W}]},{type:b,value:X}]},{type:a,tag:e,props:{},children:[{type:b,value:Y},{type:a,tag:h,props:{href:Z,rel:[i]},children:[{type:b,value:_}]},{type:b,value:$}]},{type:a,tag:m,props:{code:z,language:aa},children:[{type:a,tag:s,props:{},children:[{type:a,tag:m,props:{__ignoreMap:o},children:[{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" moment "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ax}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:C},children:[{type:b,value:"'moment'"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:u}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:C},children:[{type:b,value:"'moment\u002Flocale\u002Ffr-ca'"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:u}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"type"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" { NuxtApp } "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ax}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:C},children:[{type:b,value:"'#app'"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:u}]}]},{type:a,tag:c,props:{class:f},children:[]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:"export"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"default"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"defineNuxtPlugin"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"((nuxtApp) "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"{"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"const"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:w},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" nuxtApp.$i18n.locale.value;"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    moment."}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(locale);"}]}]},{type:a,tag:c,props:{class:f},children:[]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    nuxtApp.$i18n."}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"onBeforeLanguageSwitch"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" ("}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"oldLocale"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:w},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"newLocale"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:w},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"isInitialSetup"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:w},children:[{type:b,value:"boolean"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"nuxtApp"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"NuxtApp"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:") "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aC}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        moment."}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(newLocale);"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aD}]}]},{type:a,tag:c,props:{class:f},children:[]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"return"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aC}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        provide: {"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"            moment,"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        },"}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aD}]}]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"}"}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:")"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:u}]}]}]}]}]},{type:a,tag:e,props:{},children:[{type:b,value:ab}]},{type:a,tag:ac,props:{},children:[{type:a,tag:e,props:{},children:[{type:b,value:ad}]}]},{type:a,tag:e,props:{},children:[{type:b,value:ae},{type:a,tag:h,props:{href:af,rel:[i]},children:[{type:b,value:t}]},{type:b,value:ag}]},{type:a,tag:e,props:{},children:[{type:b,value:ah}]},{type:a,tag:m,props:{code:A,language:ai},children:[{type:a,tag:s,props:{},children:[{type:a,tag:m,props:{__ignoreMap:o},children:[{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:"ct-69d144"},children:[{type:b,value:"- import 'moment\u002Flocale\u002Ffr-ca';"}]}]},{type:a,tag:c,props:{class:f},children:[]},{type:a,tag:c,props:{class:f},children:[{type:a,tag:c,props:{class:"ct-3d81e5"},children:[{type:b,value:"+ import 'moment\u002Fdist\u002Flocale\u002Ffr-ca';"}]}]}]}]}]},{type:a,tag:e,props:{},children:[{type:b,value:aj}]},{type:a,tag:e,props:{},children:[{type:b,value:ak}]},{type:a,tag:e,props:{},children:[{type:b,value:al},{type:a,tag:h,props:{href:am,rel:[i]},children:[{type:b,value:an}]},{type:b,value:ao},{type:a,tag:k,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:e,props:{},children:[{type:b,value:ar},{type:a,tag:h,props:{href:as,rel:[i]},children:[{type:b,value:at}]},{type:b,value:au},{type:a,tag:h,props:{href:av,rel:[i]},children:[{type:b,value:t}]},{type:b,value:aw}]},{type:a,tag:"style",children:[{type:b,value:".ct-3d81e5{color:#116329}\n.ct-69d144{color:#82071E}\n.ct-934b96{color:#0550AE}\n.ct-e28d84{color:#8250DF}\n.ct-33f4ce{color:#953800}\n.ct-bc7183{color:#0A3069}\n.ct-aec7c9{color:#24292F}\n.ct-ff52ad{color:#CF222E}\n.dark .ct-ff52ad{color:#FF7B72}\n.dark .ct-aec7c9{color:#C9D1D9}\n.dark .ct-bc7183{color:#A5D6FF}\n.dark .ct-33f4ce{color:#FFA657}\n.dark .ct-e28d84{color:#D2A8FF}\n.dark .ct-934b96{color:#79C0FF}\n.dark .ct-69d144{color:#FFA198}\n.dark .ct-3d81e5{color:#7EE787}"}]}],toc:{title:o,searchDepth:y,depth:y,links:[]}},_type:aE,_id:"content:blog:2023-01-17-momentjs-avec-nuxt3.md",_source:aF,_file:"blog\u002F2023-01-17-momentjs-avec-nuxt3.md",_extension:aG},{_path:"\u002Fblog\u002F2023-01-01-mots-de-bienvenue",_dir:G,_draft:n,_partial:n,_locale:H,_empty:n,title:"Bienvenue sur mon site web !",description:F,excerpt:{type:p,children:[{type:a,tag:e,props:{},children:[{type:b,value:F}]},{type:a,tag:e,props:{},children:[{type:b,value:aH}]},{type:a,tag:e,props:{},children:[{type:b,value:aI},{type:a,tag:k,props:{},children:[{type:b,value:aJ}]},{type:b,value:aK},{type:a,tag:k,props:{},children:[{type:b,value:aL}]},{type:b,value:aM}]},{type:a,tag:e,props:{},children:[{type:b,value:aN}]},{type:a,tag:e,props:{},children:[{type:b,value:aO}]}]},createdAt:"2023-01-01T00:00:00.000Z",readingTime:{text:"1 min read",minutes:.43,time:25800,words:86},body:{type:p,children:[{type:a,tag:e,props:{},children:[{type:b,value:F}]},{type:a,tag:e,props:{},children:[{type:b,value:aH}]},{type:a,tag:e,props:{},children:[{type:b,value:aI},{type:a,tag:k,props:{},children:[{type:b,value:aJ}]},{type:b,value:aK},{type:a,tag:k,props:{},children:[{type:b,value:aL}]},{type:b,value:aM}]},{type:a,tag:e,props:{},children:[{type:b,value:aN}]},{type:a,tag:e,props:{},children:[{type:b,value:aO}]}],toc:{title:o,searchDepth:y,depth:y,links:[]}},_type:aE,_id:"content:blog:2023-01-01-mots-de-bienvenue.md",_source:aF,_file:"blog\u002F2023-01-01-mots-de-bienvenue.md",_extension:aG}]},prerenderedAt:1674366354992}}("element","text","span","ct-aec7c9","p","line","ct-ff52ad","a","nofollow"," ","code-inline","ct-33f4ce","code",false,"","root","@nuxtjs\u002Fmoment","moment.js","pre","issue",";","ct-e28d84","ct-934b96",":",2,"import moment from 'moment';\nimport 'moment\u002Flocale\u002Ffr-ca';\nimport type { NuxtApp } from '#app';\n\nexport default defineNuxtPlugin((nuxtApp) =\u003E {\n    const locale = nuxtApp.$i18n.locale.value;\n    moment.locale(locale);\n\n    nuxtApp.$i18n.onBeforeLanguageSwitch = (oldLocale: string, newLocale: string, isInitialSetup: boolean, nuxtApp: NuxtApp) =\u003E {\n        moment.locale(newLocale);\n    };\n\n    return {\n        provide: {\n            moment,\n        },\n    };\n});\n","- import 'moment\u002Flocale\u002Ffr-ca';\n\n+ import 'moment\u002Fdist\u002Flocale\u002Ffr-ca';\n","import","ct-bc7183","locale",", ","Nouvelle annÃ©e, nouvelle rÃ©solution !","blog","en","Vous avez peut-Ãªtre remarquer que le module ","https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Fmoment-module"," n'est pas capatible avec Nuxt 3.","Vous vous demandez sans doute pourquoi as-t-on besoin d'un module pour utiliser ","https:\u002F\u002Fmomentjs.com\u002F"," dans Nuxt ?","Dans Nuxt 2, lorsque vous utilisez ",", Webpack importe toutes les locales par dÃ©faut. Cela Ã©quivaut Ã  plus d'une centaine de locales qui sont importÃ©es alors que vous n'avez probablement besoin que d'une ou deux d'entre elles.","VoilÃ  ou entre en jeu ","; celui-ci se charge de supprimer les locales inutiles en utilisant ","moment-locales-webpack-plugin"," afin de rÃ©duire la taille du bundle de votre application.","Si vous avez suivi l'actualitÃ©, vous savez peut-Ãªtre que Nuxt 3 utilise maintenant ","https:\u002F\u002Fvitejs.dev\u002F","Vite.js"," au lieu de Webpack afin de bundler votre application. Il n'est donc plus nÃ©cessaire de suppimer les locales inutilisÃ©es du bundle puisque Vite.js s'en charge dÃ©jÃ  grÃ¢ce Ã  son meilleur support du tree-shaking.","Voici comment crÃ©er votre propre plugin pour utiliser moment.js directement dans une application multilingue utilisant ","https:\u002F\u002Fv8.i18n.nuxtjs.org\u002F","@nuxtjs\u002Fi18n"," et TypeScript dans Nuxt 3.","ts","Ã premiÃ¨re vue, ce code d'importation (ligne 1 et 2) qui provient de la documentation officiel de moment.js devrait fonctionner.\nPar contre, si vous avez utiliser ce code directement, vous aurez remarquer cette erreur lors de la compilation:","blockquote","Uncaught TypeError: Cannot read properties of undefined (reading 'defineLocale')","Il s'agit d'une erreur dÃ©routante que je pris bien du temps Ã  corriger, mais grÃ¢ce Ã  cette ","https:\u002F\u002Fgithub.com\u002Fmoment\u002Fmoment\u002Fissues\u002F5926#issuecomment-1056785251"," Github, j'ai finalement rÃ©ussi Ã  rÃ©glÃ© le problÃ¨me et complÃ©tÃ© la migration vers Nuxt 3 de mon application.","Avec Vite.js, il faut simplement changer l'import des locales comme ceci:","diff","Malheureusement, ne vous attendez pas Ã  une correction de la part de moment.js puisque le projet est en mode maintenance et ne recevera de mise Ã  jour que si une faille de sÃ©curitÃ© majeure est dÃ©couverte.","Vous pouvez migrer vers une alternatives plus modernes Ã  moment.js, mais dans mon cas, je devais migrÃ© une code base utilisant largement moment.js en Nuxt 3.","J'ai bien tentÃ© de migrer vers ","https:\u002F\u002Fday.js.org\u002F","Day.js"," a une API rÃ©trocompatible et Ã  l'avantage d'une approche modulaire et un code plus moderne lui permettant d'avoir un poid rÃ©duit (7kb vs 61kb) en prenant avantage des derniÃ¨res fonctionnalitÃ©s d'internationalisation d'EcmaScript, mais j'ai fait faÃ§e Ã  une fonctionalitÃ© manquante en lien avec le parsing des heures (Ex. ","10:00:00",") sans date d'associÃ©es.","Heureusement, je pourrai peut-Ãªtre faire la migration Ã©ventuellement puisqu'une ","https:\u002F\u002Fgithub.com\u002Fiamkun\u002Fdayjs\u002Fpull\u002F2197","pull request"," afin d'apporter cette fonctionnalitÃ© Ã  Day.js a Ã©tÃ© ouverte aprÃ¨s que j'aie ouvert '","https:\u002F\u002Fgithub.com\u002Fiamkun\u002Fdayjs\u002Fissues\u002F2179"," sur Github afin de reportÃ©e ce manquemant par rapport Ã  moment.js.","from","=\u003E","    ","=","string"," {","    };","markdown","content","md","AprÃ¨s trop de procrastination, j'ai enfin dÃ©cidÃ© qu'il Ã©tait temps de refaire mon site personnel de zÃ©ro.","En tant qu'Ã  y Ãªtre, de tester le nouveau ","nuxt@^3.0.0"," qui vient tout juste d'Ãªtre lancÃ© en version stable ainsi que ","nuxt\u002Fcontent@^2.0.0"," pour gÃ©nÃ©rer un blog de maniÃ¨re statique afin de hoster mon site gratuitement sur Github Pages.","Sur ce blog, vous dÃ©couvrirez mes expÃ©rimentations ainsi que des trucs et astuce sur l'Ã©cosystÃ¨me Vue.js et Nuxt.js","J'espÃ¨re vous Ãªtre utile ! N'hÃ©sitez pas Ã  poser des questions dans les commentaires."))